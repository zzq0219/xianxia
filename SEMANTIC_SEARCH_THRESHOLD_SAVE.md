# è¯­ä¹‰æœç´¢é˜ˆå€¼ä¿å­˜åŠŸèƒ½æ›´æ–°è¯´æ˜

## æ›´æ–°å†…å®¹

ä¸ºè¯­ä¹‰æœç´¢ç•Œé¢æ·»åŠ äº†é˜ˆå€¼ä¿å­˜å’Œè‡ªå®šä¹‰è¾“å…¥åŠŸèƒ½ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ›´çµæ´»åœ°æ§åˆ¶æœç´¢ç²¾åº¦ã€‚

## æ–°åŠŸèƒ½

### 1. è‡ªå®šä¹‰é˜ˆå€¼è¾“å…¥ âœ¨

- **ç²¾ç¡®è¾“å…¥æ¡†**ï¼šå¯ä»¥ç›´æ¥è¾“å…¥ 0-100 ä¹‹é—´çš„ä»»æ„æ•´æ•°å€¼
- **ä¸å†é™åˆ¶èµ·å§‹å€¼**ï¼šä¹‹å‰æ»‘å—æœ€ä½åªèƒ½åˆ° 50%ï¼Œç°åœ¨å¯ä»¥ä» 0% å¼€å§‹
- **å®æ—¶åŒæ­¥**ï¼šè¾“å…¥æ¡†å’Œæ»‘å—ä¼šç›¸äº’åŒæ­¥æ›´æ–°

### 2. ä¿å­˜é˜ˆå€¼æŒ‰é’® ğŸ’¾

- **æŒä¹…åŒ–ä¿å­˜**ï¼šç‚¹å‡»"ä¿å­˜"æŒ‰é’®å°†é˜ˆå€¼ä¿å­˜åˆ°æ¸¸æˆçŠ¶æ€
- **è‡ªåŠ¨åŠ è½½**ï¼šä¸‹æ¬¡æ‰“å¼€è¯­ä¹‰æœç´¢æ—¶ä¼šè‡ªåŠ¨åŠ è½½ä¿å­˜çš„é˜ˆå€¼
- **ä¿å­˜åé¦ˆ**ï¼šä¿å­˜æˆåŠŸåä¼šæ˜¾ç¤º"âœ“ é˜ˆå€¼å·²ä¿å­˜ï¼"æç¤º

### 3. æ”¹è¿›çš„UIè®¾è®¡ ğŸ¨

- **æ›´å¤§çš„è®¾ç½®åŒºåŸŸ**ï¼šé«˜çº§é€‰é¡¹é»˜è®¤å±•å¼€ï¼Œæ›´å®¹æ˜“è®¿é—®
- **æ¸…æ™°çš„æ ‡ç­¾**ï¼šæ·»åŠ äº†"ğŸ“Š ç›¸ä¼¼åº¦é˜ˆå€¼è®¾ç½®"æ ‡é¢˜
- **èŒƒå›´æç¤º**ï¼šæ»‘å—ä¸‹æ–¹æ˜¾ç¤º 0% åˆ° 100% çš„èŒƒå›´
- **è¯´æ˜æ–‡å­—**ï¼šæ·»åŠ äº†é˜ˆå€¼ä½œç”¨çš„è§£é‡Š

## ä½¿ç”¨æ–¹æ³•

### è°ƒæ•´é˜ˆå€¼

1. **ä½¿ç”¨æ»‘å—**ï¼š
   - æ‹–åŠ¨æ»‘å—ä» 0% åˆ° 100% è°ƒæ•´
   - æ­¥è¿›å€¼ä¸º 1%ï¼Œç²¾ç¡®æ§åˆ¶

2. **ä½¿ç”¨è¾“å…¥æ¡†**ï¼š
   - åœ¨"ç²¾ç¡®å€¼"è¾“å…¥æ¡†ä¸­ç›´æ¥è¾“å…¥æ•°å­—ï¼ˆ0-100ï¼‰
   - è¾“å…¥åæ»‘å—ä¼šè‡ªåŠ¨åŒæ­¥

### ä¿å­˜é˜ˆå€¼

1. è°ƒæ•´é˜ˆå€¼åˆ°æ»¡æ„çš„å€¼
2. ç‚¹å‡»ç»¿è‰²çš„"ğŸ’¾ ä¿å­˜"æŒ‰é’®
3. çœ‹åˆ°"âœ“ é˜ˆå€¼å·²ä¿å­˜ï¼"æç¤ºè¡¨ç¤ºä¿å­˜æˆåŠŸ
4. ä¸‹æ¬¡æ‰“å¼€è¯­ä¹‰æœç´¢æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨ä¿å­˜çš„é˜ˆå€¼

## é˜ˆå€¼è¯´æ˜

### ä»€ä¹ˆæ˜¯ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Ÿ

ç›¸ä¼¼åº¦é˜ˆå€¼å†³å®šäº†æœç´¢ç»“æœçš„æœ€ä½åŒ¹é…åº¦è¦æ±‚ï¼š

- **é«˜é˜ˆå€¼ï¼ˆ80-100%ï¼‰**ï¼š
  - âœ… ç»“æœéå¸¸ç²¾ç¡®ï¼Œé«˜åº¦ç›¸å…³
  - âŒ ç»“æœæ•°é‡è¾ƒå°‘ï¼Œå¯èƒ½é—æ¼ç›¸å…³å†…å®¹
  - é€‚ç”¨åœºæ™¯ï¼šéœ€è¦ç²¾ç¡®åŒ¹é…çš„æœç´¢

- **ä¸­ç­‰é˜ˆå€¼ï¼ˆ60-80%ï¼‰**ï¼š
  - âš–ï¸ å¹³è¡¡ç²¾ç¡®åº¦å’Œè¦†ç›–ç‡
  - é€‚ç”¨åœºæ™¯ï¼šä¸€èˆ¬çš„è¯­ä¹‰æœç´¢
  - **é»˜è®¤æ¨èå€¼**ï¼š70%

- **ä½é˜ˆå€¼ï¼ˆ40-60%ï¼‰**ï¼š
  - âœ… ç»“æœæ•°é‡å¤šï¼Œè¦†ç›–é¢å¹¿
  - âŒ å¯èƒ½åŒ…å«ä¸å¤ªç›¸å…³çš„å†…å®¹
  - é€‚ç”¨åœºæ™¯ï¼šæ¢ç´¢æ€§æœç´¢ã€å‘ç°å…³è”

- **æä½é˜ˆå€¼ï¼ˆ0-40%ï¼‰**ï¼š
  - âš ï¸ å¯èƒ½åŒ…å«å¤§é‡ä¸ç›¸å…³ç»“æœ
  - é€‚ç”¨åœºæ™¯ï¼šéå¸¸å®½æ³›çš„æœç´¢æˆ–è°ƒè¯•

## ä»£ç ä¿®æ”¹

### 1. SemanticSearchPanel.tsx

æ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

```typescript
// æ–°å¢çŠ¶æ€
const [thresholdInput, setThresholdInput] = useState('70');
const [showSaveSuccess, setShowSaveSuccess] = useState(false);

// é˜ˆå€¼è¾“å…¥å¤„ç†
const handleThresholdInputChange = (value: string) => {
    setThresholdInput(value);
    const numValue = parseFloat(value);
    if (!isNaN(numValue) && numValue >= 0 && numValue <= 100) {
        setSimilarityThreshold(numValue / 100);
    }
};

// ä¿å­˜é˜ˆå€¼
const handleSaveThreshold = () => {
    if (onSaveThreshold) {
        onSaveThreshold(similarityThreshold);
        setShowSaveSuccess(true);
        setTimeout(() => setShowSaveSuccess(false), 2000);
    }
};
```

### 2. MemoryModal.tsx

æ·»åŠ äº†ä¿å­˜å›è°ƒï¼š

```typescript
<SemanticSearchPanel
    isOpen={showSemanticSearch}
    onClose={() => setShowSemanticSearch(false)}
    gameState={gameState}
    onSaveThreshold={(threshold) => {
        if (onVectorConfigSave) {
            onVectorConfigSave({
                ...gameState.vectorConfig,
                similarityThreshold: threshold
            });
        }
    }}
/>
```

## ç•Œé¢é¢„è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ç›¸ä¼¼åº¦é˜ˆå€¼è®¾ç½®                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  0% â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€ å½“å‰: 70% â”€â”€â”€â”€â”€â”€ 100%â”‚
â”‚                                         â”‚
â”‚  ç²¾ç¡®å€¼: [  70  ] % ğŸ’¾ ä¿å­˜            â”‚
â”‚                                         â”‚
â”‚  âœ“ é˜ˆå€¼å·²ä¿å­˜ï¼                         â”‚
â”‚                                         â”‚
â”‚  ğŸ’¡ é˜ˆå€¼è¶Šé«˜ï¼Œæœç´¢ç»“æœè¶Šç²¾ç¡®ä½†æ•°é‡è¶Šå°‘  â”‚
â”‚     é˜ˆå€¼è¶Šä½ï¼Œç»“æœè¶Šå¤šä½†å¯èƒ½ä¸å¤Ÿç›¸å…³    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯ç»†èŠ‚

### æ•°æ®æµ

1. **ç”¨æˆ·è¾“å…¥** â†’ `handleThresholdInputChange`
2. **çŠ¶æ€æ›´æ–°** â†’ `thresholdInput` å’Œ `similarityThreshold`
3. **ç‚¹å‡»ä¿å­˜** â†’ `handleSaveThreshold`
4. **å›è°ƒä¼ é€’** â†’ `onSaveThreshold(similarityThreshold)`
5. **ä¿å­˜åˆ°GameState** â†’ `vectorConfig.similarityThreshold`
6. **æŒä¹…åŒ–** â†’ localStorage

### è‡ªåŠ¨åŠ è½½

```typescript
useEffect(() => {
    if (isOpen) {
        // ä»gameStateåŠ è½½ä¿å­˜çš„é˜ˆå€¼
        const savedThreshold = gameState.vectorConfig?.similarityThreshold || 0.7;
        setSimilarityThreshold(savedThreshold);
        setThresholdInput((savedThreshold * 100).toFixed(0));
    }
}, [isOpen, gameState.vectorConfig]);
```

## é…ç½®å­˜å‚¨

é˜ˆå€¼ä¿å­˜åœ¨ `gameState.vectorConfig.similarityThreshold` ä¸­ï¼š

```typescript
interface VectorConfig {
    // ... å…¶ä»–é…ç½®
    similarityThreshold: number; // 0.0 - 1.0
}
```

## ç›¸å…³æ–‡ä»¶

- [`components/SemanticSearchPanel.tsx`](components/SemanticSearchPanel.tsx) - ä¸»è¦æ›´æ–°
- [`components/MemoryModal.tsx`](components/MemoryModal.tsx) - å›è°ƒé›†æˆ
- [`types.ts`](types.ts) - VectorConfig ç±»å‹å®šä¹‰

## æµ‹è¯•æ­¥éª¤

1. **æµ‹è¯•æ»‘å—è°ƒæ•´**ï¼š
   - æ‹–åŠ¨æ»‘å—ï¼Œè§‚å¯Ÿæ•°å€¼å˜åŒ–
   - ç¡®è®¤è¾“å…¥æ¡†åŒæ­¥æ›´æ–°

2. **æµ‹è¯•è¾“å…¥æ¡†**ï¼š
   - è¾“å…¥ä¸åŒçš„æ•°å€¼ï¼ˆ0-100ï¼‰
   - ç¡®è®¤æ»‘å—åŒæ­¥ç§»åŠ¨

3. **æµ‹è¯•ä¿å­˜åŠŸèƒ½**ï¼š
   - è°ƒæ•´é˜ˆå€¼
   - ç‚¹å‡»ä¿å­˜æŒ‰é’®
   - å…³é—­å¹¶é‡æ–°æ‰“å¼€è¯­ä¹‰æœç´¢
   - ç¡®è®¤é˜ˆå€¼è¢«æ­£ç¡®åŠ è½½

4. **æµ‹è¯•æœç´¢æ•ˆæœ**ï¼š
   - ä½¿ç”¨ä¸åŒé˜ˆå€¼è¿›è¡Œæœç´¢
   - è§‚å¯Ÿç»“æœæ•°é‡å’Œç›¸å…³æ€§çš„å˜åŒ–

## æœªæ¥ä¼˜åŒ–å»ºè®®

1. **é¢„è®¾å€¼**ï¼šæ·»åŠ å¿«é€Ÿé€‰æ‹©å¸¸ç”¨é˜ˆå€¼çš„æŒ‰é’®ï¼ˆå¦‚ 50%ã€70%ã€90%ï¼‰
2. **å†å²è®°å½•**ï¼šè®°å½•æœ€è¿‘ä½¿ç”¨çš„é˜ˆå€¼è®¾ç½®
3. **æ™ºèƒ½æ¨è**ï¼šæ ¹æ®æœç´¢ç»“æœè‡ªåŠ¨æ¨èåˆé€‚çš„é˜ˆå€¼
4. **A/Bæµ‹è¯•**ï¼šæ¯”è¾ƒä¸åŒé˜ˆå€¼çš„æœç´¢æ•ˆæœ

## æ›´æ–°æ—¥æœŸ

2025-11-16