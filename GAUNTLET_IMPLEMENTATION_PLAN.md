# å¤§é—¯å…³ç³»ç»Ÿå®æ–½è®¡åˆ’

> åŸºäº GAUNTLET_CHALLENGE_SYSTEM_DESIGN_V2.md çš„ç®€åŒ–å®æ–½æŒ‡å—

---

## ğŸ“‹ æ ¸å¿ƒç›®æ ‡

å®ç°ä¸€ä¸ªAIé©±åŠ¨çš„ç»¼è‰ºé—¯å…³èµ›äº‹ç³»ç»Ÿ,åŒ…å«:
- 64äººæ·˜æ±°èµ›åˆ¶(6è½®)
- AIç”Ÿæˆå…³å¡+ä¼˜åŒ–æœºåˆ¶
- ç›´æ’­é—´é£æ ¼ç•Œé¢
- å¼¹å¹•äº’åŠ¨ç³»ç»Ÿ

---

## ğŸ¯ å®æ–½æ­¥éª¤(åŸå­åŒ–)

### é˜¶æ®µ1: æ•°æ®åŸºç¡€ (3-4å°æ—¶)

#### æ­¥éª¤1.1: åˆ›å»ºåŸºç¡€ç±»å‹æ–‡ä»¶
- æ–‡ä»¶: `types/gauntlet.types.ts`
- å†…å®¹: æ‰€æœ‰æšä¸¾å’Œæ¥å£å®šä¹‰
- éªŒè¯: æ£€æŸ¥ç±»å‹æ˜¯å¦æ­£ç¡®å¯¼å…¥

#### æ­¥éª¤1.2: æ‰©å±•GameState
- æ–‡ä»¶: `types.ts`
- ä¿®æ”¹: æ·»åŠ  `gauntletSystem` å­—æ®µ
- éªŒè¯: ç¡®è®¤ä¸å½±å“ç°æœ‰åŠŸèƒ½

#### æ­¥éª¤1.3: åˆ›å»ºå·¥å…·å‡½æ•°
- æ–‡ä»¶: `services/gauntlet/gauntletUtils.ts`
- å†…å®¹: åˆ›å»ºé»˜è®¤æ•°æ®ã€æ’åºã€è®¡ç®—ç­‰å·¥å…·å‡½æ•°
- éªŒè¯: å•ç‹¬æµ‹è¯•å·¥å…·å‡½æ•°

---

### é˜¶æ®µ2: AIæœåŠ¡å±‚ (6-8å°æ—¶)

#### æ­¥éª¤2.1: åˆ›å»ºAIæœåŠ¡åŸºç¡€ç»“æ„
- æ–‡ä»¶: `services/gauntlet/gauntletAIService.ts`
- å†…å®¹: åˆ›å»ºç±»å’ŒåŸºç¡€æ–¹æ³•ç­¾å

#### æ­¥éª¤2.2: å®ç°å‚èµ›è€…ç”Ÿæˆ
- æ–¹æ³•: `generateContestants()`
- éªŒè¯: ç”Ÿæˆ63åAIå‚èµ›è€…,æ£€æŸ¥æ•°æ®æ ¼å¼

#### æ­¥éª¤2.3: å®ç°è¯„å§”ç”Ÿæˆ
- æ–¹æ³•: `generateJudges()`
- éªŒè¯: ç”Ÿæˆ3-5åè¯„å§”,æ£€æŸ¥ä¸ªæ€§åŒ–ç¨‹åº¦

#### æ­¥éª¤2.4: å®ç°å…³å¡è‰ç¨¿ç”Ÿæˆ
- æ–¹æ³•: `generateChallengeDraft()`
- éªŒè¯: ç”Ÿæˆå•ä¸ªå…³å¡,æ£€æŸ¥åˆç†æ€§

#### æ­¥éª¤2.5: å®ç°å…³å¡ä¼˜åŒ–
- æ–¹æ³•: `optimizeChallenge()`
- éªŒè¯: å¯¹è‰ç¨¿æ‰§è¡Œä¼˜åŒ–,æ£€æŸ¥æ”¹è¿›è´¨é‡

#### æ­¥éª¤2.6: å®ç°æ‰¹é‡ç”Ÿæˆ
- æ–¹æ³•: `generateAllChallengeDrafts()`
- éªŒè¯: ä¸€æ¬¡ç”Ÿæˆ6è½®å…³å¡è‰ç¨¿

#### æ­¥éª¤2.7-2.10: å…¶ä½™ç”Ÿæˆå‡½æ•°
- è¡¨ç°ç”Ÿæˆã€è¯„åˆ†ç”Ÿæˆã€è§£è¯´ç”Ÿæˆã€å¼¹å¹•ç”Ÿæˆ
- é€ä¸ªå®ç°å¹¶éªŒè¯

---

### é˜¶æ®µ3: æµç¨‹æ§åˆ¶ (4-5å°æ—¶)

#### æ­¥éª¤3.1: åˆ›å»ºèµ›äº‹ç®¡ç†æœåŠ¡
- æ–‡ä»¶: `services/gauntlet/gauntletEventService.ts`
- åŠŸèƒ½: åˆ›å»º/æ›´æ–°/æŸ¥è¯¢èµ›äº‹

#### æ­¥éª¤3.2: åˆ›å»ºæµç¨‹æ§åˆ¶æœåŠ¡
- æ–‡ä»¶: `services/gauntlet/gauntletFlowService.ts`
- åŠŸèƒ½: çŠ¶æ€æœºã€é˜¶æ®µè½¬æ¢ã€è‡ªåŠ¨åŒ–æµç¨‹

#### æ­¥éª¤3.3: å®ç°å‡†å¤‡é˜¶æ®µè‡ªåŠ¨åŒ–
- åŠŸèƒ½: è‡ªåŠ¨ç”Ÿæˆå‚èµ›è€…â†’è¯„å§”â†’å…³å¡â†’ä¼˜åŒ–
- éªŒè¯: å®Œæ•´è·‘é€šå‡†å¤‡æµç¨‹

#### æ­¥éª¤3.4: å®ç°æ¯”èµ›æµç¨‹
- åŠŸèƒ½: å•è½®æ¯”èµ›çš„å®Œæ•´æµç¨‹
- éªŒè¯: è·‘é€šä¸€è½®æ¯”èµ›

---

### é˜¶æ®µ4: UIç»„ä»¶ (8-10å°æ—¶)

#### æ­¥éª¤4.1: å¤§å…ç•Œé¢
- æ–‡ä»¶: `components/gauntlet/GauntletHallModal.tsx`
- åŠŸèƒ½: æ˜¾ç¤ºèµ›äº‹çŠ¶æ€ã€å€’è®¡æ—¶ã€æŠ¥åå…¥å£
- éªŒè¯: èƒ½çœ‹åˆ°ç•Œé¢,çŠ¶æ€åˆ‡æ¢æ­£å¸¸

#### æ­¥éª¤4.2: å…¬å‘Šæ ç•Œé¢
- æ–‡ä»¶: `components/gauntlet/GauntletAnnouncementModal.tsx`
- åŠŸèƒ½: æ˜¾ç¤º6è½®å…³å¡ã€ä¼˜åŒ–è¿›åº¦
- éªŒè¯: èƒ½æŸ¥çœ‹å…³å¡è¯¦æƒ…å’Œä¼˜åŒ–å†ç¨‹

#### æ­¥éª¤4.3: æŠ¥åç•Œé¢
- æ–‡ä»¶: `components/gauntlet/GauntletRegistrationModal.tsx`
- åŠŸèƒ½: è§’è‰²é€‰æ‹©ã€æŠ¥åç¡®è®¤
- éªŒè¯: èƒ½æˆåŠŸæŠ¥å

#### æ­¥éª¤4.4: ç›´æ’­é—´ä¸»ç•Œé¢
- æ–‡ä»¶: `components/gauntlet/GauntletLiveModal.tsx`
- åŠŸèƒ½: ç»¼åˆæ‰€æœ‰å­ç»„ä»¶çš„ä¸»å®¹å™¨
- éªŒè¯: å¸ƒå±€æ­£ç¡®

#### æ­¥éª¤4.5: å™äº‹å±•ç¤ºç»„ä»¶
- æ–‡ä»¶: `components/gauntlet/NarrativeDisplay.tsx`
- åŠŸèƒ½: æ˜¾ç¤ºè¡¨æ¼”å™äº‹ã€å¼¹å¹•æ»šåŠ¨
- éªŒè¯: æ–‡å­—æ»šåŠ¨æµç•…

#### æ­¥éª¤4.6: å¼¹å¹•èŠå¤©å®¤
- æ–‡ä»¶: `components/gauntlet/DanmakuChat.tsx`
- åŠŸèƒ½: å‘é€å¼¹å¹•ã€è§¦å‘AIå“åº”
- éªŒè¯: å¼¹å¹•å‘é€åèƒ½çœ‹åˆ°AIå›åº”

#### æ­¥éª¤4.7: è§£è¯´æ¡†
- æ–‡ä»¶: `components/gauntlet/CommentaryBox.tsx`
- åŠŸèƒ½: æ˜¾ç¤ºè§£è¯´å‘˜è¯„è®º
- éªŒè¯: è§£è¯´å†…å®¹åˆç†

#### æ­¥éª¤4.8: è¯„å§”å¸­
- æ–‡ä»¶: `components/gauntlet/JudgePanel.tsx`
- åŠŸèƒ½: æ˜¾ç¤ºè¯„å§”ã€è¯„åˆ†é˜¶æ®µæ‰“åˆ†
- éªŒè¯: è¯„åˆ†æ˜¾ç¤ºæ­£ç¡®

#### æ­¥éª¤4.9: æ’è¡Œæ¦œ
- æ–‡ä»¶: `components/gauntlet/RankingPanel.tsx`
- åŠŸèƒ½: å®æ—¶æ’åã€æ™‹çº§çŠ¶æ€
- éªŒè¯: æ’åè®¡ç®—æ­£ç¡®

#### æ­¥éª¤4.10: ç»“æœå±•ç¤º
- æ–‡ä»¶: `components/gauntlet/GauntletResultModal.tsx`
- åŠŸèƒ½: èµ›äº‹ç»“æŸåçš„ç»“æœæ€»ç»“
- éªŒè¯: å† å†›ä¿¡æ¯æ˜¾ç¤ºå®Œæ•´

---

### é˜¶æ®µ5: é›†æˆæµ‹è¯• (3-4å°æ—¶)

#### æ­¥éª¤5.1: å®Œæ•´æµç¨‹æµ‹è¯•
- ä»åˆ›å»ºèµ›äº‹â†’æŠ¥åâ†’å‡†å¤‡â†’æ¯”èµ›â†’ç»“æŸ
- éªŒè¯æ¯ä¸ªç¯èŠ‚

#### æ­¥éª¤5.2: AIç”Ÿæˆè´¨é‡è°ƒä¼˜
- è°ƒæ•´prompt
- æµ‹è¯•è¾¹ç•Œæƒ…å†µ

#### æ­¥éª¤5.3: æ€§èƒ½ä¼˜åŒ–
- å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ä¼˜åŒ–å¤§æ•°æ®é‡æ˜¾ç¤º

---

## ğŸ“¦ å…³é”®æ–‡ä»¶æ¸…å•

### ç±»å‹å®šä¹‰
- `types/gauntlet.types.ts` - æ‰€æœ‰ç±»å‹å®šä¹‰

### æœåŠ¡å±‚
- `services/gauntlet/gauntletAIService.ts` - AIç”ŸæˆæœåŠ¡
- `services/gauntlet/gauntletEventService.ts` - èµ›äº‹ç®¡ç†
- `services/gauntlet/gauntletFlowService.ts` - æµç¨‹æ§åˆ¶
- `services/gauntlet/gauntletUtils.ts` - å·¥å…·å‡½æ•°

### UIç»„ä»¶
- `components/gauntlet/GauntletHallModal.tsx`
- `components/gauntlet/GauntletAnnouncementModal.tsx`
- `components/gauntlet/GauntletRegistrationModal.tsx`
- `components/gauntlet/GauntletLiveModal.tsx`
- `components/gauntlet/NarrativeDisplay.tsx`
- `components/gauntlet/DanmakuChat.tsx`
- `components/gauntlet/CommentaryBox.tsx`
- `components/gauntlet/JudgePanel.tsx`
- `components/gauntlet/RankingPanel.tsx`
- `components/gauntlet/GauntletResultModal.tsx`

---

## ğŸ”‘ æŠ€æœ¯è¦ç‚¹

### AIç”Ÿæˆç­–ç•¥
1. **ä½¿ç”¨ enhancedGenerate**: ç»Ÿä¸€ä½¿ç”¨ç°æœ‰çš„AIç”ŸæˆæœåŠ¡
2. **Contextç®¡ç†**: åˆç†ä½¿ç”¨worldbookå’Œpreset
3. **ç»“æ„åŒ–è¾“å‡º**: AIè¿”å›JSONæ ¼å¼,ä¾¿äºè§£æ

### çŠ¶æ€ç®¡ç†
1. **GameStateæ‰©å±•**: æ·»åŠ  `gauntletSystem` å­—æ®µ
2. **æŒä¹…åŒ–**: é‡è¦çŠ¶æ€è‡ªåŠ¨ä¿å­˜
3. **çŠ¶æ€æœº**: æ¸…æ™°çš„çŠ¶æ€è½¬æ¢é€»è¾‘

### UIè®¾è®¡åŸåˆ™
1. **å“åº”å¼**: é€‚é…ç§»åŠ¨ç«¯
2. **æ¨¡å—åŒ–**: ç»„ä»¶ç‹¬ç«‹å¯æµ‹è¯•
3. **ç›´æ’­æ„Ÿ**: æ¨¡æ‹Ÿç»¼è‰ºç›´æ’­æ°›å›´

### æ€§èƒ½è€ƒè™‘
1. **æŒ‰éœ€åŠ è½½**: å¤§æ•°æ®åˆ†é¡µæ˜¾ç¤º
2. **è™šæ‹Ÿåˆ—è¡¨**: é•¿åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
3. **AIèŠ‚æµ**: é¿å…é¢‘ç¹è°ƒç”¨AIæ¥å£

---

## âš ï¸ å…³é”®çº¦æŸ

1. **åŸå­åŒ–éªŒè¯**: æ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½ç‚¹å°±æš‚åœéªŒè¯
2. **ä¸å †ç§¯é”™è¯¯**: å‘ç°é—®é¢˜ç«‹å³ä¿®å¤,ä¸ç»§ç»­æ·»åŠ æ–°åŠŸèƒ½
3. **ç”¨æˆ·åé¦ˆä¼˜å…ˆ**: ç›¸ä¿¡ç”¨æˆ·çš„å®é™…æµ‹è¯•ç»“æœ
4. **ä¿æŒç®€æ´**: é¿å…è¿‡åº¦å·¥ç¨‹åŒ–

---

## ğŸ“Š é¢„ä¼°å·¥æ—¶

- **é˜¶æ®µ1**: 3-4å°æ—¶
- **é˜¶æ®µ2**: 6-8å°æ—¶
- **é˜¶æ®µ3**: 4-5å°æ—¶
- **é˜¶æ®µ4**: 8-10å°æ—¶
- **é˜¶æ®µ5**: 3-4å°æ—¶

**æ€»è®¡**: 24-31å°æ—¶

---

## ğŸš€ ä¸‹ä¸€æ­¥

ç¡®è®¤æ­¤è®¡åˆ’å,æˆ‘å°†ä» **é˜¶æ®µ1æ­¥éª¤1.1** å¼€å§‹å®æ–½:
- åˆ›å»º `types/gauntlet.types.ts` æ–‡ä»¶
- ç­‰å¾…æ‚¨éªŒè¯ç±»å‹å®šä¹‰
- ç„¶åç»§ç»­ä¸‹ä¸€æ­¥

å‡†å¤‡å¥½äº†å—?