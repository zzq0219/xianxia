# 大牢系统设计文档

## 系统概述

大牢系统是一个综合性的监狱管理系统,包含多个功能区域和丰富的交互机制。玩家可以关押囚犯、进行审讯、管理监狱设施等。

## 区域划分

### 1. 居住区 (Living Quarters)
**功能描述**: 囚犯的日常居住区域

**子区域**:
- **普通牢房**: 关押普通囚犯
  - 容量: 4人/间
  - 卫生条件: 简陋
  - 安全等级: 低
  
- **重犯牢房**: 关押危险囚犯
  - 容量: 2人/间
  - 卫生条件: 恶劣
  - 安全等级: 中
  - 特殊限制: 佩戴镣铐
  
- **单独囚室**: 关押极度危险或特殊身份囚犯
  - 容量: 1人/间
  - 卫生条件: 较差
  - 安全等级: 高
  - 特殊限制: 24小时监控、灵力封印

**互动选项**:
- 查看囚犯列表
- 调整关押位置
- 检查牢房状况
- 囚犯对话

### 2. 审讯区 (Interrogation Area)
**功能描述**: 对囚犯进行审讯和刑罚执行

**刑法类型**:

#### 基础刑法
- **鞭刑**: 用鞭子抽打囚犯
  - 伤害: 低
  - 威慑力: 中
  - 获得信息概率: 30%
  - 囚犯屈服度: +10
  
- **杖刑**: 用木杖击打囚犯
  - 伤害: 中
  - 威慑力: 中
  - 获得信息概率: 40%
  - 囚犯屈服度: +15

- **夹棍**: 夹手指或脚趾
  - 伤害: 中
  - 威慑力: 高
  - 获得信息概率: 50%
  - 囚犯屈服度: +20
  - 副作用: 可能造成永久性伤害

#### 进阶刑法
- **老虎凳**: 将囚犯绑在特制凳子上,逐渐增加痛苦
  - 伤害: 高
  - 威慑力: 高
  - 获得信息概率: 60%
  - 囚犯屈服度: +30
  - 持续时间: 长

- **水刑**: 用水灌入囚犯口鼻
  - 伤害: 中
  - 威慑力: 极高
  - 获得信息概率: 70%
  - 囚犯屈服度: +35
  - 风险: 可能导致死亡

- **火刑**: 使用烙铁或火焰
  - 伤害: 极高
  - 威慑力: 极高
  - 获得信息概率: 75%
  - 囚犯屈服度: +40
  - 副作用: 留下疤痕,降低囚犯价值

#### 特殊刑法(需要特殊道具或技能)
- **灵魂搜索**: 直接读取囚犯记忆(需要灵识技能)
  - 伤害: 低
  - 威慑力: 极高
  - 获得信息概率: 90%
  - 囚犯屈服度: +50
  - 消耗: 大量灵力
  - 风险: 可能损坏囚犯神识

- **幻境折磨**: 使囚犯陷入痛苦幻境(需要幻术技能)
  - 伤害: 极低(精神伤害)
  - 威慑力: 极高
  - 获得信息概率: 85%
  - 囚犯屈服度: +45
  - 特点: 不留外伤

- **生不如死**: 最残酷的刑法组合
  - 伤害: 极高
  - 威慑力: 绝对
  - 获得信息概率: 95%
  - 囚犯屈服度: +100
  - 后果: 囚犯可能疯狂或死亡

**审讯机制**:
- 意志力对抗: 审讯者魅力/威压 vs 囚犯意志
- 信息获取: 根据刑法强度和囚犯意志决定
- 屈服系统: 累计屈服度达到100时完全招供
- 风险管理: 过度刑讯可能导致囚犯死亡或疯狂

### 3. 娱乐区 (Recreation Area)
**功能描述**: 囚犯的休闲和思想改造区域

**设施**:
- **演武场**: 允许囚犯进行有限的武艺训练
  - 效果: 维持囚犯身体素质
  - 条件: 表现良好的囚犯
  - 监管: 需要狱卒看守

- **图书角**: 提供修炼典籍和杂书
  - 效果: 思想改造,提高归顺度
  - 内容: 受控制的书籍
  - 规则: 定期审查阅读内容

- **药膳堂**: 提供特殊药膳
  - 效果: 恢复囚犯健康
  - 目的: 维持囚犯价值
  - 条件: 需要消耗资源

- **禅房**: 供囚犯打坐修行
  - 效果: 恢复精神状态
  - 限制: 封印修为,防止逃脱

**奖励机制**:
- 表现良好: 获得娱乐时间
- 配合审讯: 减少刑罚
- 提供情报: 改善待遇

### 4. 劳役区 (Labor Area)
**功能描述**: 囚犯进行强制劳动

**劳动类型**:
- **采矿**: 开采灵石矿脉
  - 产出: 灵石、矿材
  - 强度: 高
  - 收益: 高

- **炼药**: 辅助炼制丹药
  - 产出: 低级丹药
  - 强度: 中
  - 要求: 有炼药基础

- **符箓制作**: 绘制低级符箓
  - 产出: 基础符箓
  - 强度: 低
  - 要求: 有灵力基础

- **器具维修**: 修理武器装备
  - 产出: 维修服务
  - 强度: 中
  - 要求: 有锻造经验

**劳役机制**:
- 日常配额: 必须完成的工作量
- 超额奖励: 超出配额可获得奖励
- 劳役等级: 根据修为和技能分配
- 监工系统: 需要狱卒管理

### 5. 管理区 (Administration Area)
**功能描述**: 监狱管理和运营中心

**功能模块**:
- **囚犯档案**: 查看和管理所有囚犯信息
  - 基本信息: 姓名、罪行、刑期
  - 状态信息: 健康、屈服度、归顺度
  - 价值评估: 赎金、劳役价值、情报价值

- **狱卒管理**: 管理监狱守卫
  - 人员配置: 分配狱卒到各区域
  - 能力培养: 提升狱卒实力
  - 忠诚度: 维持狱卒忠诚

- **财务管理**: 监狱收支情况
  - 收入: 劳役产出、赎金、情报售卖
  - 支出: 食物、设施维护、狱卒薪酬
  - 预算: 规划监狱发展

- **安全监控**: 监狱安全状况
  - 监控阵法: 全监狱覆盖的监控系统
  - 逃脱风险: 评估各囚犯逃脱可能
  - 突发事件: 处理暴动等紧急情况

### 6. 医疗区 (Medical Ward)
**功能描述**: 治疗受伤和生病的囚犯

**设施**:
- **疗伤室**: 治疗外伤
  - 服务: 伤势治疗
  - 目的: 维持囚犯价值
  - 条件: 消耗丹药

- **养病房**: 调理身体
  - 服务: 疾病治疗、体质恢复
  - 时间: 需要休养期
  - 效果: 恢复健康状态

- **神识修复**: 治疗精神损伤
  - 服务: 修复神识损伤
  - 需求: 高级医师
  - 消耗: 珍贵灵药

**医疗机制**:
- 生命垂危: 及时救治防止死亡
- 疾病系统: 不卫生环境可能导致疾病
- 医疗费用: 治疗需要消耗资源

## 特殊机制

### 1. 屈服度系统
- **初始值**: 0
- **影响因素**: 刑罚强度、时间、个人意志
- **阈值效果**:
  - 0-30: 抗拒,不配合
  - 31-60: 开始动摇,部分配合
  - 61-80: 基本屈服,配合审讯
  - 81-100: 完全屈服,和盘托出

### 2. 归顺度系统
- **初始值**: 0
- **影响因素**: 待遇、思想改造、恩威并施
- **阈值效果**:
  - 0-30: 敌对,伺机逃脱
  - 31-60: 中立,勉强服从
  - 61-80: 顺从,愿意效力
  - 81-100: 忠诚,可以招募

### 3. 逃脱系统
- **逃脱意愿**: 归顺度越低,意愿越高
- **逃脱能力**: 修为、技能、伤势
- **监管强度**: 狱卒数量、阵法等级
- **逃脱结果**: 
  - 成功: 囚犯逃走,声望下降
  - 失败: 加重刑罚,增加监管

### 4. 赎金系统
- **赎金来源**: 囚犯家族、门派、朋友
- **赎金金额**: 根据囚犯身份和价值
- **谈判机制**: 可以讨价还价
- **特殊条件**: 可能附带其他条件

### 5. 招募系统
- **招募条件**: 归顺度≥80
- **招募成本**: 消耗资源和声望
- **忠诚度**: 初始忠诚度较低,需培养
- **能力保留**: 保留原有技能和修为

## 随机事件

### 正面事件
- **贵人探监**: 有势力的人来探监,获得好处
- **意外招供**: 囚犯主动交代重要情报
- **归顺**: 囚犯心悦诚服地投降
- **技能传授**: 囚犯传授特殊技能

### 负面事件
- **暴动**: 囚犯暴动,需要平息
- **越狱**: 囚犯尝试逃跑
- **疾病爆发**: 监狱内疾病传播
- **狱卒叛变**: 狱卒被收买或叛变
- **外援攻打**: 囚犯的势力来劫狱

### 中性事件
- **囚犯冲突**: 囚犯之间发生冲突
- **情报线索**: 获得新的情报线索
- **交易提议**: 有人提议交换或购买囚犯

## UI设计建议

### 主界面布局
```
┌─────────────────────────────────────────┐
│           大牢管理系统                    │
├───────────┬─────────────────────────────┤
│           │                             │
│  区域列表  │       主要内容区域            │
│           │                             │
│ - 居住区   │   [根据选择的区域显示不同内容]  │
│ - 审讯区   │                             │
│ - 娱乐区   │                             │
│ - 劳役区   │                             │
│ - 管理区   │                             │
│ - 医疗区   │                             │
│           │                             │
├───────────┴─────────────────────────────┤
│     统计信息: 囚犯数/总容量 | 收支 | 安全   │
└─────────────────────────────────────────┘
```

### 配色方案
- **主色调**: 深灰色 (#2c2c2c) - 营造压抑氛围
- **强调色**: 暗红色 (#8b0000) - 用于危险警告
- **辅助色**: 灰蓝色 (#4a5f7a) - 用于中性信息
- **文字色**: 浅灰色 (#e0e0e0) - 易读性

### 动画效果
- **区域切换**: 淡入淡出效果
- **刑罚执行**: 震动或闪烁效果
- **警告提示**: 脉冲闪烁效果
- **状态变化**: 进度条动画

## 数据结构建议

### 囚犯数据结构
```typescript
interface Prisoner {
  id: string;
  name: string;
  level: number;
  crime: string;
  sentence: number; // 刑期(天)
  remainingDays: number; // 剩余刑期
  health: number; // 0-100
  submissionLevel: number; // 屈服度 0-100
  loyaltyLevel: number; // 归顺度 0-100
  location: PrisonArea; // 所在区域
  cellType: CellType; // 牢房类型
  skills: string[]; // 技能
  value: {
    ransom: number; // 赎金价值
    labor: number; // 劳役价值
    intelligence: number; // 情报价值
  };
  status: PrisonerStatus[]; // 状态(受伤、生病等)
  history: InterrogationRecord[]; // 审讯记录
}
```

### 审讯记录
```typescript
interface InterrogationRecord {
  date: Date;
  method: TortureMethod;
  duration: number;
  result: {
    success: boolean;
    informationGained: string;
    submissionIncrease: number;
    healthDecrease: number;
  };
  interrogator: string;
}
```

### 刑法数据
```typescript
interface TortureMethod {
  id: string;
  name: string;
  category: 'basic' | 'advanced' | 'special';
  damage: number;
  intimidation: number;
  successRate: number;
  submissionIncrease: number;
  requirements?: {
    skill?: string;
    item?: string;
    cost?: number;
  };
  risks: {
    death: number;
    permanentInjury: number;
    insanity: number;
  };
}
```

## 平衡性考虑

### 风险与收益
- **高强度刑罚**: 快速获取信息,但可能损失囚犯
- **温和手段**: 耗时长但安全,保值囚犯价值
- **恩威并施**: 平衡惩罚和奖励,提高归顺度

### 资源消耗
- **维护成本**: 每日需要消耗食物和资源
- **医疗开销**: 治疗受伤囚犯需要丹药
- **人力配置**: 狱卒工资和培养费用

### 收益来源
- **赎金收入**: 释放囚犯获得赎金
- **劳役产出**: 囚犯劳动获得资源
- **情报价值**: 出售情报获得利益
- **招募收益**: 招募强力追随者

## 扩展可能

### 未来可添加功能
1. **改造系统**: 将囚犯改造成善良之人
2. **监狱升级**: 扩建和改善监狱设施
3. **特殊囚犯**: 关押传说中的魔头或神秘人物
4. **监狱排行**: 与其他势力的监狱比较
5. **外交影响**: 关押他国人员影响外交关系
6. **传奇囚犯**: 囚犯中的传奇故事和特殊事件