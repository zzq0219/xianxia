# 战斗界面美化设计文档 (Battle UI Redesign)

## 1. 设计目标
将战斗界面从简单的按钮交互升级为沉浸式的“古风修仙卡牌”体验。统一主界面（洞府）的视觉风格，增强战斗的策略感和视觉冲击力。

## 2. 核心改动

### A. 战斗选项卡牌化 (Action Cards)
**目标**: 将“攻击”、“技能”、“逃跑”等选项设计为独立的卡牌样式，而非简单的按钮。

**设计细节**:
1.  **卡牌结构**:
    *   **边框**: 根据技能/行动的稀有度（凡品、良品、仙品等）动态变化颜色和光效（复用 `rarityHelpers.ts`）。
    *   **背景**: 深色半透明纹理（古纸或黑玉质感），带有微弱的流光效果。
    *   **图标/插图**: 
        *   普通攻击: 剑/拳图标。
        *   技能: 根据技能描述或类型显示抽象符号（如火、雷、医）。
    *   **排版**: 竖排或古典衬线字体显示技能名称。
    *   **消耗**: 右上角或底部清晰标记 MP/灵力消耗。
    *   **描述**: 鼠标悬停或点击时展开/高亮显示详细机制。

2.  **交互动画**:
    *   **入场**: 卡牌从屏幕底部呈扇形或网格飞入。
    *   **悬停**: 卡牌轻微上浮、放大、发光。
    *   **点击**: 卡牌破碎或化为光效飞向目标。

### B. 战斗操作面板 (Battle Action Panel - Bottom Bar)
**目标**: 美化底部操作栏，使其看起来像是一个控制台或法宝囊。

**设计细节**:
1.  **布局**: 保持现有的 [记录] [行动] [逃命] 结构，但优化按钮样式。
2.  **样式**: 
    *   **行动按钮**: 放大并在中间突出，作为核心交互点（类似“出牌”按钮）。
    *   **材质**: 磨砂玻璃 + 金属镶边。

### C. 战场布局 (Battlefield Layout)
**目标**: 优化敌我双方的站位和展示，增强对峙感。

**设计细节**:
1.  **背景**: 虽目前可能是纯色或简单背景，建议增加一层暗色遮罩突出角色。
2.  **站位**: 
    *   玩家（左/下） vs 敌人（右/上）。
    *   增加呼吸动效，让角色卡牌不是静止的。
3.  **状态栏**: 优化血条/蓝条的视觉效果，使其更细致（如增加内阴影、高光）。

## 3. 组件重构计划

### 1. 新增组件: `SkillCard.tsx`
*   **输入**: `skill: Skill | string` (支持普通攻击作为特殊技能), `onSelect: () => void`.
*   **功能**: 渲染单张技能卡牌。
*   **样式**: Tailwind CSS + 动画类。

### 2. 重构组件: `ActionSelectionMenu.tsx`
*   **改动**: 移除旧的 `ActionButton`，替换为 `SkillCard` 的网格/Flex布局。
*   **布局**: 
    *   桌面端: 居中弹窗，网格排列。
    *   移动端: 底部抽屉滑出，横向滑动或紧凑网格。

### 3. 样式微调: `Battlefield.tsx`
*   引入新的背景容器。
*   调整 CharacterCard 的间距和大小。

## 4. 技术选型
*   **样式库**: Tailwind CSS (现有)。
*   **图标**: 简单的 Unicode 字符或现有 FontAwesome (如果已集成)，或者使用 CSS 绘制的简单图形。
*   **动画**: CSS Transitions & Keyframes (`animate-slide-up`, `hover:scale`).

## 5. 验证步骤
1.  创建 `SkillCard` 并替换一个简单按钮进行视觉验证。
2.  应用到整个 `ActionSelectionMenu`。
3.  调整布局间距。